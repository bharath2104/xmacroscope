<div #tooltipElement class="tooltip"></div>
<mgl-map
  [style]="style"
  [zoom]="[3]"
  [center]="[0, 0]"
  [fitBounds]="worldBbox"
  [renderWorldCopies]="false"
  (load)="onMapLoad($event)">

  <!-- Soures -->
  <mgl-geojson-source
    id="graticule"
    [data]="graticule">
  </mgl-geojson-source>
  <mgl-geojson-source
    id="basemap"
    [data]="basemapGeoJson">
  </mgl-geojson-source>
  <mgl-geojson-source
    id="nodes"
    [data]="nodesGeoJson">
  </mgl-geojson-source>

  <!-- Layers -->
  <mgl-layer
    id="graticule"
    source="graticule"
    type="line"
    [paint]="{
      'line-color': '#DEDAD7',
      'line-width': 1
    }">
  </mgl-layer>
  <mgl-layer
    id="basemapFill"
    source="basemap"
    type="fill"
    [paint]="{
      'fill-color': '#fff',
      'fill-outline-color': '#DEDAD7',
      'fill-opacity': 0.6
    }">
  </mgl-layer>
  <mgl-layer
    id="basemapLines"
    source="basemap"
    type="line"
    [paint]="{
      'line-color': '#DEDAD7',
      'line-width': 1.5
    }">
  </mgl-layer>
  <mgl-layer
    id="nodes"
    source="nodes"
    type="symbol"
    [paint]="{
      'text-color': '#000'
    }"
    [layout]="{
      'icon-image': ['get', 'icon'],
      'icon-allow-overlap': true,
      'symbol-sort-key': ['get', 'size'],
      'text-field': ['case', ['==', ['get', 'labelPosition'], ''], '', ['get', 'label']],
      'text-justify': 'auto',
      'text-variable-anchor': ['top', 'bottom', 'left', 'right'],
      'text-radial-offset': 1,
      'text-optional': true,
      'text-size': 14,
      'text-allow-overlap': true,
      'text-font': [
        'Roboto Regular'
      ]
    }"
    (click)="nodeClicked($event)"
    (mouseEnter)="onMouseEnter($event)"
    (mouseLeave)="onMouseLeave($event)">
  </mgl-layer>
</mgl-map>
