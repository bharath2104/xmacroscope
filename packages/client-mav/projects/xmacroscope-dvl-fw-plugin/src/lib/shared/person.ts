import { areaSizeScale } from '@dvl-fw/core';
import { access, chain, lookup, map, Operand, Operator } from '@ngx-dino/core';
import { assignIn, transform } from 'lodash';


export const allShapes: string[] = [
  'circle', 'cross', 'diamond', 'square', 'star', 'triangle', 'wye'
];

export const images = {
  'penguin': 'data:image/gif;base64,R0lGODlhZABkAMZ0AAAAAAEBAQICAgQEBAUFBQcHBwgICAoKCgsLCwwMDA0NDQ8PDxAQEBERERMTExQUFBUVFRYWFhkZGRoaGhsbGxwcHB8fHyAgICEhISIiIiQkJCgoKCkpKSoqKi4uLjIyMjQ0NDU1NTc3Nzg4ODs7Ozw8PD09PUVFRUZGRkxMTE1NTVBQUFhYWFpaWltbW11dXV5eXl9fX2VlZWdnZ2pqamtra21tbW5ubnFxcXNzc3Z2dnh4eHl5eX19fYCAgISEhIaGhoqKiouLi42NjZKSkpOTk5WVlZiYmJmZmZubm5ycnJ2dnaCgoKWlpaioqKurq62tra6urrGxsbS0tLe3t7m5uby8vL29vb6+vsHBwcPDw8jIyNDQ0NfX19jY2NnZ2dvb293d3d7e3t/f3+Dg4Obm5ujo6Onp6erq6uvr6+/v7/Ly8vX19fb29vf39/j4+Pn5+fr6+vz8/P7+/v///////////////////////////////////////////////yH5BAEKAH8ALAAAAABkAGQAAAf+gH+Cg4SFhoeIiYqLjI2Oj5CRkpOUlZaXmJmam5ydnp+goaKjpKWmp6ipqqusra6vsLGys7S1tre4uYMAvAC6pL3BvL+fwsbEnMbKyJnKzr7MlM/T0ZHT18PVjNjc2oncwYXH3uLBAxcWBuPkj8IiZnTxaGFobjHs1sFU8fz8axT4HBnb0q/gjoCNjAEp2E8MNISIlElow5BfB4jflPWoGM8GxkPPCnjh+OSjoWkoOHZ5aPLPtSwV5RxouWvaC44gaLq8VoFjCprcGHCU0RJcCY4+inIjwrGISXAW3HBc8hGcgCsc6TTBCA4Aj6x0okDsGiIOWCkIuyb4ApaOk4D+XQEoaUuHCb64IubQPcIuLoAndOkEIec3wJrAOLz5BQAhMB0W2hYDeODYRLVnO50tcHwhGmZBzw4ETsNSlzNC0wgEtuJ5HehnAfS2HcJsWblnZtvCQGb7tjOpbTEQ6+1bGUWwDoe7Rj2NTdslpW0RL24MeNYWysNldFag7RsGv5affBah7ZTotYRte3YU7L3wvRI+owGWTYPs6Mc7WwI2SX5a8cnnzBhgfcDbf/oZkwFYWiA4i4PU9UJfVifolJkxWGSVBYSEKROBHBzNUYKFFwYzQ1ZIkFhiL1Xw45wacJRBBgQqKuNAblp0gcUZOqyhgoorAnADPy504YITK9RmAGSQXCQxRhoGQDGBAhwsuWIIYCTwgxAAkJDNksYYMQIAG2gQIJjCIJCDeCQa4wEBbFpoTACfASnZl0+FI1me8S2m1JenWaldkINaWdM1hh5KTaKMNuroo5BGKumklFZq6aWYthIIADs=',
  'squirrel': 'data:image/gif;base64,R0lGODlhZABkAIABAAAAAP///yH+EUNyZWF0ZWQgd2l0aCBHSU1QACH5BAEKAAEALAAAAABkAGQAAAL+jI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMagDMJlNpcUql0Mj0Sq0usFynNtENA74HsZhsPmvTaijb7H63kfK5sR6O47H6/VT5BsZX8VTDtvVHWEgD15A44WWY55gFWSkzyXBluTnT9fAIaucySBkpmsZ4qnmJ4Lf401n2usojSytr+4hbqsNbp/sb6CssR1w8jINsrLycbOMc6hNdG0s9RnQNC6Tdm9Od+w3e2swbcBhsfo59J7zm3odbVfyuHv/6ZV+/RzarDwjvnp98ePoJ4mdw3cCECxNC8ObQQbWIFCtavIgxo8YRjRw7evwIMqTIkSRLmjzpogAAOw==',
  'cheetah': 'data:image/gif;base64,R0lGODlhZABkAIABAAAAAP///yH+EUNyZWF0ZWQgd2l0aCBHSU1QACH5BAEKAAEALAAAAABkAGQAAAL+jI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfMpvOJAgCgE6n1eqUmsNyulOoNd1Xhj/jMHaHPlbXbCnrLv9v522PP6+edvf8vtgE4SEiHUYj4l5HImKfRCJmGALcYaUliCVmS2WjCmXjySZgiOkhaqhiKmuq56hflugdrGpA5C1gnWyvZSqugZzCm6rbr9SA3yYtJXCxcZZyMNcwWDE1hHU25iZYr3aacrS2y9ussYV6etRyYrn4N3j61jt1t+Oze4K1Wlq9/Dr/Anxl+DAAeE9hP3EB69eS9w3fQHh6CBRFCsOgAIgeEdgkVRsDYMQ4cg+EsaPzo8ZA6kAdYBjyJ0qEgbTDbfUsZU6ZKezVt3tN585FAnC8lRgT6EGlOoz27/ZypNCPAptmeCjXakWixn1GdQtXaDCzYhhepHsVasizaomvDdY25z+zOHy612L2LN6/evXz7+v0LOLDgwYQLGz6MOLHixYwbRygAADs=',
  'brat': 'data:image/gif;base64,R0lGODlhZABkAMIFACQgH1ZRUIiDgrizsv3//P///////////yH5BAEKAAcALAAAAABkAGQAAAP+eLrc/vCBSWuNOOvNtf3g141k6YRoaplse6ow7M5jDASBoA/8oAs4G20oSeUGhKRyyVT6Aioi0YhsWq/LARQldYVy2LA4CQx1S9/qeI3Vms8bUEDNrl/dInhETrf7rXgreg0gAn+HYgIggwsfAYiQYYEUjB+GkZhXioJnH32ZoEkDeVKeoadMo5w0pqiuSluUrBWPr7ZJsRMzFrW3t6RoFp++qMA1FcPEp6qyJMLKysy6xxSX0MSbzXEUvdfEuR0W3t6rexXW43XJYdnTGLTpbJM36GLg78jxYvMW9XflhLjpY1eNTpkba+4VobBO3yZ/TiZ0+3dhIcKBgCZAzCL+cYzCgBMaxtO4RpVIaRYnYiRzMQuPJopUNvmo4NzKmQD65OoTMlHFRhUQ4TmSSRWTXD1hAdi4ZBW8P0hJRhrVTZpAJTE9/jyQz0/UalNbEmgXNKLMVFvL2iHb6hDVJWwncDzL5OdTO1By7PBRhu6YtxEdwRWL5Z5NPycjyV0SlQ4UpoNldb15dGlliTxzlqyolnJkQJ+ybpZMwbOVjn+Trrlw13RgyARU+cUpxzVM1FY2zaZtyXYTZnOcZNt9u5Dv31/B/olr+fjvg5ghMRfpHJRVhtWjhaCePSwI7t2FhoAdXvr48raYk0e//At7V8mJv68DrvN8TJxL3y+aX/X+fvGkSfUfIu3UdNWAhyhkH4J1pIUdXgKAd8sTiDmImzzcRCghJDxAtyEBH4njBwp69eBWDzokB8Af5Rymjg0wxvhgHQWCRFhCMuaognyMbQWUf2zoKOR3FWrDQGsYDqnkhyD6+COQazCnJAzroeXkkzz2aMMRJj0BY5ZKGWmjZlCRqCFHK2ahgxFuAWQjmFid99tivPGCCE0WNddeb3OmWadye4qZJ5OiIAWRUVY0BqCgECDpRzuH0nmZgAleaQ6gBFIa2BVbVIkFWc5MlmmkflZGKJqMZvCMeaRySuai7oQq6qN6ounqqbEZQ41+hyjSaqKvsujmrjey4WtGpfaheCpSQ7RFY62bAksos1Os+uJGONxapKUtOJsanJKOxq0X/dgR7rdr6VqKnWxAseFj8kTFiIHlopuksYvMS6+1hUHbL3n8AKDvmNG1oSlyxWbx1cB5crOObMnoJklyDF/Ky0aB6JUipkxAN2zFTzoyTMA3jKyiwCB7YMSZau6VipcppEwsiRr3wBcQJ48rMz5TRrHzLj3n+/O6Sg7NsBA7JwAAOw==',
  'cool': 'data:image/gif;base64,R0lGODlhZABkAMIFACQgH1ZRUIiDgrizsv3//P///////////yH5BAEKAAcALAAAAABkAGQAAAP+eLrc/vCBSWuNOOvNtf3g141k6YRoaplse6ow7M5jDASBoA/8oAs4G20oSeUGhKRyyVT6Aioi0YhsWq/LARQldYVy2LA4CQx1S9/qeI3Vms8bUEDNrl/dIngkRLf7rXgreg0gAn+HYgIggwsfAYiQYYEUjB+GkZhXioJnH32ZoEkDeVKeoadMo5w0pqiuSqReFY+vtUlblLIVtrwEsSStvbW/HRafwqequcAVx8jJq3EVl8+8m8vSE7TVvbgAxbvcyNEQFtTi1uQv2oA97jzoou/zTd4Z5k/eMUfOiD5lNrQduTYBQ8CDEwTA88ODIEIZ5R5KVDjGh0SJES9KnNP+xKJGjEU+brw0SeTBkCZTqjxJaKXLl1wYwJz5Up9MCkFo6nyYs2AjCiV33tChT6jCCz8nEHC4k44yoQAMIT0wi8DTpk2Y0kRijyoFQ1dpnltSdCYZpM2SQAXQZq0otBSUlHU5lsnclbSeKgi3VKiYsC+pXaj6VmfdelhvfVmycw3glWRDnLsr8rAVyh/PaY26ZLPIbRW3dpacZWY/K54/MtncB/NDy2Fg9nk8++Whxxo78sm68nSY1Ag/0Uad0rcY1zGOPbYcNCBHTMBVwN4M22p0C89DXZ9VvW8hxwC/UKz1BAWO8YkWM3yHjt6fuaDjySdgj+98+XCV3pev1+v+BOP7vdLfNAGiQ9BeOBUoTlf+saVgNVM1COCDmPSHIDsUdhOhBRn2Eg2BHb5yYEsYhogKgzf9ZyI02KR4w4qhoOgiABOmIk6NpUVI4ouHnIejHfkgIuOONPqDk0I/plKeirep42J8fmjlozvy9ABEWd0dpyNKnEWynQ1Zprcll0l2hJx5Yf7lJEpQ+hPePuhhMqRBICbzJndl/rZmRkzaspCfe+6RFoySBCrooITqZuihcSXaBDHMJOioXIt6YMykkLIQjIlhdXIpp5nOYEmITFWCHYVBMXJhnfdppWpSn8bT3KtEapOnP2XRyiVOt9bR3De68smdLXe2GOw6cvQomgVlx2Yj3p+OLRlTsxzYcN4OVhJ1JrWaCsUtKzN96+lH4uoqBLcJAAA7',
  'happy': 'data:image/gif;base64,R0lGODlhZABkAMIFACQgH1ZRUIiDgrizsv3//P///////////yH5BAEKAAcALAAAAABkAGQAAAP+eLrc/vCBSWuNOOvNtf3g141k6YRoaplse6ow7M5jDASBoA/8oAs4G20oSeUGhKRyyVT6Aioi0YhsWq/LARQldYVy2LA4CQx1S9/qeI3Vms8bUEDNrl/dIngkRLf7rXgreg0gAn+HYgIggwsfAYiQYYEUjB+GkZhXioJnH32ZoEkDeVKeoadMo5w0pqiuSqReFY+vtUlblLIVtrwEsSStvbW/HRafwqequcAVx8jJq3EVl8+8m8vSE7TVvbgAxbvcyNEQFtTi1uQv2ujP3hnG7cjKExiz8u4X5c348+oH9/742CFsoDMx74pMOIjF2w2GkBzO8UNP4Q2KKCD+yej+JyGDaX5UoHIYr861bx/DmVRxLhI9OSH1KQhYh+SHUCdDdJQJkIJGJjFC2SzJpmIjChthCFUas95MCttqqogaKSeIPwlBYkzREtJLR39OPl14aOiEkSkOGVWZFMRPO0PfptLHFqsFqqdyTkR0gaZXAXL/8sA0FG8/bkO7Hq5mdYLixcgaA3gMuZfkwJVBfSWbmdtmAJg7u+QjutpnyqVRSUadGmcI1q0zSTYc+1Th2rze1cV9ii5S3q7W+gSOSrhj4nl9s0MOyuNu5od48oPuVTpU6hGt/8be1unR49ztiCV0PbxUbN9B1xm8GPB6nimXs8EROpQW2lc8kh8uda/waSj4AfJPT/KtoYx/1uASmH7rcFaUOfVJUsZ0D8LXYID5OeIeIjwMZRd6Fk324Rc5ANbDiQNNiAKGVuSUjYPv2SBjMDGCuEd5Yc04I2wZ2ngjBTxqoiNLkLhYA4VqmRUDggINaA+SHKo41YajWcgBjZqhyB40TsJjAXbEMIMjcQ4NgWVsYbJwpmhfdUJUaW3CYUlqVlVyV2eTeDdIIZA1xkh8b4qTp55/jjVLhBzaVOg+jiC63lCLPqmhLVJaGel+cjiahZKXXmmEiXbwUGmanf44VYkmiqpDEDGU2sKQQ7pqJqwyyOomrYTaametriYAADs=',
  'surprise': 'data:image/gif;base64,R0lGODlhZABkAMIFACQgH1ZRUIiDgrizsv3//P///////////yH5BAEKAAcALAAAAABkAGQAAAP+eLrc/vCBSWuNOOvNtf3g141k6YRoaplse6ow7M5jDASBoA/8oAs4G20oSeUGhKRyyVT6Aioi0YhsWq/LARQldYVy2LA4CQx1S9/qeI3Vms8bUEDNrl/dIngkRLf7rXgreg0gAn+HYgIggwsfAYiQYYEUjB+GkZhXioJnH32ZoEkDeVKeoadMo5w0pqiuSqReFY+vtUlblLIVtrwEsSStvbW/HRafwqequcAVx8jJq3EVl8+8m8vSE7TVvbgAxbvcyNEQFtTi1uQv2ujP3hnG7cjKExizf08CzqH5+1jv5Zr58XbDFsFtbOh9K8LODsGGqB4WdHiBIQB/Ta5ZQqX+0ZwdehYRrlGBiiRFbAqm2ekYDBNLj3U0EgpXR+I9UDYpiByz6mYdGDsRxRhYMSUFjE2GglJaB2QjCn+YYpLKpqjPnyqCHsoJlWgulV5RaP3DdeLKigL9vEybSeFGP05p+jEZiu5HtF3/rAVwLtPevljrXQ07GKccSDbHrukIOBTjSDYbf/yBNJKPHS5DSJbHbe1mzs/WVgZty+2E0aRfmb6YWt5q1K2hFYqNzjNtcbbRXcZc+wtuzeISV1vNVtg7ueliwIaEd8I8G6eFxT3aiziK5XCb8+0GXWcvmQcKn9qr4jMmgOHzvur+gVfR9NFVs48nH5v4TGWz1kIP3/n++vkWDPNef+bhAyB94w3Yn2KHkGdDgYRZhF0Y+QGFilPrmGXYgd6dwh8DCGbCYYD8qGMURCKOqN55CoJYXCQqrgiJQvB0mGKMoXxo0Xb4xcggGx1lEx9kPrZlYkh+xQihGDraA9aMMU64RJA1vBiVipjQiIaVZ3G45B1H1shlQiNKSYBbLbSH2IE/hkEMMzYaCKCZBA3RUpfdfZlUmHBSt1V3bQLypi5+kmVDoE2gCcdbhurX4KB2WoAoE+Tp6cRDjJz4pFregPEopF3wwdkkKGXan05mHkJqPabuiOo8NrXqpCOWxhSrrGLKkWoWXOHKQVb6wMZDGSn42qcROewa0MMPQcRgbJoxRvEsK9GCOi0LMV6LqxDTJgAAOw==',
  'grimace': 'data:image/gif;base64,R0lGODlhZABkAOfvACIeICMeICQeICIfICIfISMfHyMfICMfISQfICQfISMgICQgICQgISUhIiYiIyYjIycjIycjJCgkJSklJiolJiomJysnKCwoKSwpKi0pKy4qKy8rLDArLTAsLTEtLjIuLzMvMDMvMTMwMTQxMTUxMjYyMzczNDg0NTk1Njk2Nzo3ODs4ODw4OT05Oj46Oz87PD88PUA9PkE+P0I/P0M/QERAQUVBQkZCQ0ZDREdERUhFRklGRkpHR0tHSExJSk1KS1BNTVFOTlJOT1JPUFNQUVRRUlVSUlVSU1ZTVFhUVVhVVVhVVllWV1pXV1pXWFtYWVxZWl1aWl1aW15bW19cXF9cXWBdXmFeX2JfYGNgYWRhYmViYmZkZGdkZWhlZmlmaGpnaGtpaW9sbW9tbXBtbnFub3NxcXVyc3ZzdHd0dXh1dnd2dnh2d3l3d3p4eHt5eXx5en57fH58fX99foB+foF/f4KAgIOBgYSBgoSCg4WDg4WDhIaEhYeFhYiGhoqIiIuIiYuJioyKi46MjI+NjZGPj5GPkJKQkZORkpSSk5WTk5aUlJeVlZeWlpiWl5mXmJqYmZ2bm5+dnqCen6GfoKKgoaSjo6WkpKalpaimp6mnqKqoqKqpqauqqqyrq62srK6srbCur7Cvr7GwsLKxsbe1tre2tri3t7m4uLq5ubu6ury6u727vL28vb69vb++vsC+v8C/v8HAwMLBwcPCwsPCw8TDxMXExMbFxcfGxsjHx8nIyMrJycrJysvKy8zLy83MzM7Nzc/OztDPz9DQ0NLR0tPS0tXU1NbV1dbW1tfX19jX2NnY2drZ2dva2tzb29zc3N3d3eHg4OLh4ePj4+Tk5OXl5ebm5ufm5+jn5+no6Ovr6+zs7O3t7e/u7u/v7/Dw8PHx8fLy8vT09Pb19fb29vf39/j4+Pn5+fr6+vv7+/z7+/z8/P39/f7+/v///////////////////////////////////////////////////////////////////yH5BAEKAP8ALAAAAABkAGQAAAj+AP8JHEiwoMGDCA8uMGBAAcOHDRkuSEixosWLGC0qGACxo0ePCjKKHEnSIICPKFN6PFCypUuDDlXKnCngpU2RBWY6kJGFzh9HlTp1quToDx0sMhzMDHmzqUECKme4GeUs3bur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',
  'laughing': 'data:image/gif;base64,R0lGODlhZABkAOfbACIeICMeICQeICIfICIfISMfHyMfICMfISQfICQfISMgICQgICQgISUhIiUiIiYiIycjJCgkJSklJiomJysnKCsoKCwoKSwpKi0qKi4qKy8rLDAsLTEtLjIuLzMvMDMwMTQxMTYyMzg0NTk1Njk2Nzo3ODs4ODw4OT05Oj46Oz87PD88PUA9PkE+P0I/P0M/QERAQUVBQkZCQ0ZDREdERUhFRklGRktHSExISU1KS1BNTVJOT1JPUFNQUVRRUlVSU1ZTVFhVVVlWV1pXWFtYWVxZWl1aW15bW19cXGBdXmFeX2JfYGNgYWRhYmVjY2ZkZGlmZ2toaWtpaWxqam9sbXJwcHNxcXRycnVyc3ZzdHd0dXh1dnh2d3l3d3p4eHx5eXx5en57fH58fX99foB+foKAgIOBgYWDhIaEhYeFhYmHh4qIiIuJioyKi46MjI+NjZGPj5GPkJORkpWTk5aUlJeVlZeWlpiWl5mXmJuZmpyamp+dnqCen6GfoKKgoaOhoaSioqWkpKalpaelpqimp6mnqKqoqKqpqauqqqyrq62srK6sra+trrCur7Gur7Cvr7GwsLKxsbOysrSzs7a0tbe1tri3t7q5uby6u727vL28vb69vb++vsC/v8HAwMLBwcPCwsTDxMXExMbFxcfGxsjHx8nIyMrJycrJysvKy8zLy83MzM7Nzc/OztDPz9DQ0NHQ0dPS0tXU1NbW1tfX19jX2NnY2drZ2dva2tzb29zc3N/e3+Df4OHg4OLh4ePi4uPj4+Tk5OXl5ebm5ufm5+jn5+no6Ovr6+7t7u/u7u/v7/Dw8PHx8fLy8vT09PX09fX19fb19fb29vf39/j4+Pn5+fr6+vv7+/z7+/z8/P7+/v///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////yH5BAEKAP8ALAAAAABkAGQAAAj+AP8JHEiwoMGDCA8uMGBAAcOHDRkuSEixosWLGC0qGACxo0ePCjKKHEnSIICPKFN6PFCypUuDDlXKnCngpU2RBWY+aMGEzJo7fhAh8nNnDZklLR7MDHmzqUECKl14gYTL2rarWLNmtXYLUhcWKgs4daogp8cHSA4J08q2LdtghYo0+FhgwNiXKGvgKea2r1+sw+zQQHmXJMogn/4qXtwJyMeJhS9+RHJqseXFpYx4RBCZ4sKOJipdHr04kwqQnQ0K6CjBzTTSsP9KaxPBY+qBHm3gis37r63BEMWm9mglWu/jfaeVsR25o4VGyKP3VUShY+GOHVRJ397WFQjrTjv+jqDFvbxWXCfA2+wYY63591eDvQhuMyZDE+7hww9WQj1J+wZsQJ5+BN7iAUQslQSRBawQ6OA2qVT3kIIQLfLgg4j4JxlEW1x4IRb0ZQRRDdJ4+GA0wDEk4kMS7Gbig7fUNqFGEL3xoodsIGgRRCu8duOD0qTwkHAJIQBRJj96eAlEAVAEERJJmkgERAmZxVBlUV44CkQ1HQRREFma+AOVXj6UWJgXckJmQfbVYNk0gVyDJlbaTAKMZdrM8JBdBUGEh2VyGPACJXPCEoQBVFxWx5oCncRQA8QsdowGD/XQYJLEWMEAQwykYlkxSjFE5D9PWsZFRwxMEcyL0cAh4UP+PGhjWRGMQoSIZYB84JEFcBjnYDaChOARBW1YtVghtT60qmXMrDGBRyQMko1+odzgUaq/jBbMmkYy5AJsvUTxUQ6rmMeLEh8B4UpsKwwpEERe8ObKmB0hWV4vMj50wiKyxnbqjBBF0ps2lKTHEBHwmfFQBV9Ac9wjZEKUS2/XkBEqA7HAt8wHDhwoqCy92RIxQw9U09tyEPWhnyMjQATCMLxVE6oB/3xmwLe80TIXRBkgk7BHVfTWLkMHQNTEyR/x8Z41HHgkATO8LYHSGL1Z6xEU772CEie8ifHQAVa20dsFH+HwniQo+cHbGijV0RsEH8Xw3iIo5cHbHHt2a4D+2ryJkO57mqCUCG98DAnR4FF/RLV5xaA0C28ZfoR4bIR8RAp8O3jkQr+wRc6Q3nzHNo2QEAHBeXmZeHQr4YY/5HZvrlDKUAl36ncGRFicThreDA0QNnK7gEFEGsc8SMkTTCSiO2lsKz5nlGF8DRETzyeJ7kM2t1D9j6cRTSrJJm/vITUzv/uQi+I/WMvIDEGS/oWNsG9AF+8/qAWZemtfP4HdG0AkRMvan3l6kSyGGEKA7xEEo/RmBASaZwiMKtqjYOZA6QhjZwaADG4ecocKSod3KirIahhCAw9Z4xNwcMIRVniEKvihFg/ShgwYtUGGeMJBzYiD31LiA9HoJ3D+MzJI6QikCrDMxABKMAZ8erAnhADIFPBBBAaPaAJemCcUEOFTmRjSQPMwYopHNMAJ8iMdCAbxIFYyACbK4wsMhNEjRFgebywBEc5QxEopKNF2zPjGjhBCOtFAAQ0PwpGHiE06rvgIB4QQBS6kwQxXeIIO4NaRF8iReRBhSkUgEgFbSOcKLJKCInRxSWqsQg86gAgokFOLfI1qkw+BgTOi0x8a/EEZo7kFGjJgADUcB0WD9AxEsoCcY4BgD9jgTTLWoITjWIFJI+mIIo7DjGdEhy+8MYSGMAIRCqDCg245xbPOKBKoPGQDjwNnVmzRgUy6pCMlCCA4gUECHb0kjS/zkKcDgeGCbVLoISNIpwNvYQJ/tqQjHPgmAluhq2DipZvT3J8hxknO8HSkOOmbRheY05kAdIQGt9heLWZo0LF4JAJt0GOWorEGSjq0MDZ7SAksFKVMkM6dtzGI3h5ShMu9SBR8fGlO0/iQH3DNQdrYhA8+0qScwtIjM7ADBcsjDDqQtCOvdGpCzOmRBhShELU7ji8IMQQwukurGfFoSlawhUfUInyKqUYtGrGF/jEVrSUBEEoawAIlhGENduiDUPpQhzWEIQkrMGtHBqBFvB60j5ANoWObQtTIPmayqdErZDWJWbSe5ABG6lZoD5AAAHT2HwEBADs=',
  'peace': 'data:image/gif;base64,R0lGODlhZABkAOfJACIeICMeICQeICIfICIfISMfHyMfICMfISQfICQfISMgICQgICQgISUhIiYiIycjJCgkJSklJiomJysnKCwoKSwpKi0qKi4qKzAsLTEtLjIuLzMvMDMwMTQxMTUxMjczNDg0NTk1Njk2Nzo3ODs4ODw4OT05Oj46Oz87PD88PUA9PkE+P0I/P0M/QERAQUVBQkZCQ0ZDREdERUhFRklGRktHSFBNTVFOTlJPUFNQUVRRUlVSU1ZTVFdUVFhVVVlWV1pXWFtYWVxZWl1aW19cXF9cXWBdXmFeX2JfYGNgYWRhYmVjY2xqanBtbnFub3JwcHNxcXVyc3ZzdHd0dXh1dnh2d3l3d3p4eHt5eX57fH58fX99foB+foKAgIOBgYSBgoSCg4qIiIuJioyKi46MjI+NjZCOjpGPkJKQkZWTk5aUlJeVlZeWlpiWl5mXmJ+dnqCen6GfoKKgoaSjo6WkpKalpaimp6mnqKqoqKqpqauqqqyrq62srK6sra+trrCur7Cvr7GwsLKxsbOysre1tri3t7q5uby6u727vL28vb69vb++vsC/v8HAwMLBwcPCwsPCw8TDxMXExMbFxcfGxsjHx8nIyMrJycrJysvKy8zLy87Nzc/OztDPz9HQ0dPS0tTT09XU1NbW1tfX19jX2NnY2drZ2dva2tzb29zc3N3d3d/e3+Df4OHg4OLh4ePi4uPj4+Tk5OXl5ebm5ufm5+jn5+no6Onp6erq6uvr6+zs7O3t7fDw8PHx8fPz8/T09Pb19fb29vf39/j4+Pn5+fr6+vz7+/39/f7+/v///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////yH5BAEKAP8ALAAAAABkAGQAAAj+AP8JHEiwoMGDCA8uMGBAAcOHDRkuSEixosWLGC0qGACxo0ePCjKKHEnSIICPKFN6PFCypUuDDlXKnCngpU2RBWY6WJGES5g2cvTokdMmDBckKxzMDHmzqUECKllcCXSqWLKrWLNmLWYqkBUVKgs4daogp0cHRPLI0sq2LdtYd4Q0+FhgwNiXKGe4qeW2r1+ss9jIQHmXJEofjv4qXsyIx8eJhS9+JHJpseXFlYZ4RBCZ4sKOJAhdHr0YEQqQnQ0K6BiBjDDSsP8GGwPBY+qBHmmcis37b6nBEMWm9ggFWO/jfYV1sR25I4U/yKP35TOhY+GOGjRJ3962UwfrTjv+hhjFvbzWUyXA2+z4Yq3591djtQhuMyZDEu7hw481Qj1J+wZgQJ5+BJqyAUQslQQRBZsQ6GAymVT3kIIQ9fHgg3r4JxlEVFx4YRT0ZQTRDMF4+CAwwDEk4kMR7Gbig6bUNqFGEJXxoodiIGgRRCm8duODwZzwkHAJIQARIj96aAhEAVAEERFJmhgERAmZxVBlUV44CUQ1HQSRD1mauAOVXj6UWJgXLkJmQfbNgKaHyMTwkF0FQeTGmx6usaZAJzHUAC14XliLUgwR+c+TgXooxJ4Q6ZHohXcw+lAsjz4Yy5pGMsRCpRemMKRAEF3B6YNVkAmRIKM6CIipD6GSKoH+pbBqgAPEvKofMYQa8M9nBmxqq36eMnQAREr8qh8SKG1hLHxaPHSAlWMs+14YKK0hrXlpzJmpAXJcWx4cQ0K0h7fcZfjRuKQJwwQvfeWixXZT8OWWL1gMA5u5DG3bLWwldECGq1gdE0oXFfywnQ8WeBHKMVmhQgYHJsQGbqEQWQubFw+BoEMROBzIUBzbvfHQBjgUocMHD4ERW7YMDQBtbLdkkNIK9konTLAfZYBLbNR+pGxsj0jYUQcDbicKBx9NAAlvWTgLURK9fXJDR0e88p4rRnSEQyi9HQERrysgB0ocZ9ChioOp0HGGHKAgd5qwhzJEK7nRDZMrqA+5SHf+b6TIakAgex/3h99WBN7bFGRuG7bhsb1tAJEQUcr4aK1IyhAek49Wx57bDpH5ZUDsOayfs3yumCxzSVTnQ22Y/hfLKha0GkMymGgLH2Zw0QUagOwCJwx74vZQIw860sNHDQyByYOJBC88QzwQ2MsSMzlhnH45zIkQgJbAJwsLMzFEgy7wRQIRnWUy5Ll5vtQQ/kM2XF9e6DMiZKUBh5gHxfsQfWFeIRDhDEWsdIISbccTDODfQx6gt+gAwwTOMwhHHhKt7TTBIyIQghO68IUnIAFnD3nXdnrGEKZUBCIQKIV0hnGBh/xgDqlwiyz8oITUecAY0iGFjB63Ioa44Bf+0dnErKDAtcWwogu1AdhxUBTBhPDKAFKIziBY0D3SrCIISELO/h7SJJF0hA/IYUWtYnMM8h0HDxrCCEQmsLzAXUICTbQIVB6CAVHsrRQagIgJDQOREUjuWrAQgY5ecr8W/NFYsABfHL0IkRDY0VimIEEaXdKRDLTxVZxA2iIp9JAJgDFVeIDjJltCHPkFShhWYE5nAtARGZgiUaQA3iTv4hEIjMGAWQJGGB6gytvsyiMjsFCUECGkjuzRlwLZ1kOEQIkbSYJ+s0Tm/R6yg0U8CBmK0MFHuojMhKAkBmwonXlkoQZZdsRQ3UzIHD3SACHcARbRcYUdgJA6j6AznRRWYWVKUkAFQJBijIohBin+QAXHbROf/5lJA1RwhCyEgQ1xEEoc1hCGLBghBfVEyQDQh1BOKvCjHXXKND+KEsiEtDAAIukxT+rLkxzASJmC6QESAACWBgQAOw==',
  'sleep': 'data:image/gif;base64,R0lGODlhZABkAOfVACIeICMeICQeICIfICIfISMfHyMfICMfISQfICQfISMgICQgICQgISUhIiYiIyYjIycjJCgkJSklJiomJysnKCwoKSwpKi4qKy8rLDAsLTEtLjIuLzMvMDMwMTUxMjYyMzczNDg0NTk1Njk2Nzo3ODs4ODw4OT05Oj46Oz87PD88PUA9PkE+P0I/P0M/QERAQUVBQkZCQ0ZDREdERUhFRklGRkxISUxJSk1KS05LTFBNTVFOTlJOT1JPUFNQUVRRUlVSU1ZTVFhVVVhVVlpXWFtYWVxZWl1aW19cXGBdXmFeX2JfYGNgYWRhYmViYmVjY2hlZm1ra29sbXNwcHNxcXVyc3ZzdHd0dXh1dnh2d3l3d3p4eH16e357fH58fX99foB+foOBgYSBgoiGhoqIiIuIiYuJioyKi46MjI+NjZGPkJSSk5WTk5aUlJeVlZeWlpiWlpiWl5mXmJqYmZuZmp2bm56cnJ6dnZ+dnqCen6GfoKKgoaKhoaSjo6WkpKalpaimp6mnqKqoqKqpqauqqqyrq62srK6sra+trrCur7Cvr7GwsLKxsbOysrWztLe1tri3t7q5uby6u727vL28vb69vb++vsC/v8HAwMLBwcPCwsTDxMXExMbFxcfGxsjHx8nIyMrJycrJysvKy8zLy83MzM7Nzc/OztLR0tPS0tTT09bW1tfX19jX2NnY2drZ2dva2tzb29zc3N3d3d/e3+Hg4OLh4ePj4+Tk5OXl5ebm5ufm5+jn5+no6Onp6evr6+zs7O3t7e7t7u/u7vDw8PHx8fLy8vPz8/T09PX09fb19fb29vf39/j4+Pn5+fr6+vv7+/z7+/z8/P39/f7+/v///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////yH5BAEKAP8ALAAAAABkAGQAAAj+AP8JHEiwoMGDCA8uMGBAAcOHDRkuSEixosWLGC0qGACxo0ePCjKKHEnSIICPKFN6PFCypUuDDlXKnCngpU2RBWY6YMEEDJk4ewgR2hOHDJglLBzMDHmzqUECKltsWQTrWbWrWLNmffZqkZYVKgs4daogp0cHSAbl0sq2LVtcgYw0+FhgwNiXKGnI4eW2b9ZPMz/eJYlSSCa/iLHekdngx8eJgy9+RBIqseVqVmTOqPbpiEcEkSku7Fji0eXLmxKpVo2HAsQpgR+GFiigowQ0zE7rxspLBkQ5amIznO2xBqzdyGmheNgAUDUowg2E9khFGfLdq0A8jODoqgrhkO/+dqyQ6PpuUhkeVjhcjZqcN/Djv1mjwWOAwR03kDKv+1KFhxqUglgzTqQ0VkcisMLfaY1A8FAICvp1zBAyNdURDGstaJkfczGkQi2IBZNDRxDw4QJEYr0UE0MlZKjhVaigBAdEEdTRyI04LpOVLjCMd0k1uJDQkUsrGpBBhC9eNchHH/QgUwTQYDWLCR1lsN9Vr3AAEUslQVSBKUnuOMqYezzAUBsWyHQDVqp40BEIq2g1imuyEQbRIWG2NUp6DOhBy0xWXAUKBh2hQEtbhAwpUkdY5MmWJa49gIhukkzQkQx8uVUFios+RIOOjmLVoAETSKIbImZCpMMwfikzA0T+GUEkwXGhXtXHXBd4opseDHRUBDKJvRIBrBpBlEatV9HBUAN3jDmKK4kJ4pEFasgnn4BZmbGlRRCpkBuyJXxURWLQCceIVsssx1CKCSEA0STIVkMMSnckBpZwsrAVCUT3JQQREvEumEyvsVUwTVtFEHuQWQxVFrB5pkTXg1udQFTTQRAJ8fDGlgGhcEEQscfxyG1Z8vFAK9JA8spsUeMbQ3aB/JAcLNeMlRsnn7TsLjbbzItS6xL0b889G/ExRIQQbXMgRz+Ei9I146Kwuwy1ALXN3wX9D0RbXF1zFsRCdK7XKysS9kOxkL2yK2cb4IAzapPsDNDSjWaA1XGTnLX+AQdA1ETeJC+B0hfIPUMMYsCEmbhfxFi1mxcPHcDwGchJQ0IiUbKlDB5rJmlDHqBqBQ0iJUiDHBkouXHdDgaMAAYjoqQCCiFXaClFmFEYsAEWhnySiiiNfCHkxMix8dAAVBuwx3V/yLRJmJrI5BxyeTzEsAGFXBeNYyjdnmfuKAERzXWJfpT9db/w8NEToSe5TIEe9bA4cuUzlPzy5jljxwsP5XDIwaGaRiFw8BAY3MFx16neuiCiOg0JgxbF4FgxaCGMFxkPZpMD3MhQ9xHCaXBjXYgcRJjwwY0pASJ2Y0EJH5aCyG2NIW9bIbKaQTeBQIRWMnRUK9pmgEXkMFT+ieChFn7oqCsQK3kqJGKYWqi1FzLkaUrUUC2axhBBRFFDzauTQJJ3hCsuiAgf69uydOHF6+SiQwYIjw0fEocyFu9k/6gNQzZDMlzsIQxiAIQvSEaNGMDRiQbABMeYwYVUMUQCZRjfxijxR0AGYWPM8NhHnGC6h/ngeAgpEigeBgaVtOFhm4BIzDD2kC7GqxcOSgkG2hcqMGpxYRAxFbKYJpNKxAsSEAENRRiGAlaGSVsyyQOylHGCRhKEIw+hXK3SMJM+IIuDDGFKRWgErVA1YiabDFUrhtVEbj3kBcBylDEIlRISKDJPrjKmQiASqFDNQSXlCRUV+DWSjhgiVNT+2NRHxlAraanTXw+hgCjw6QftPAQFY3NUKCz1SpFA5SEZiFOoojE7Q5wCgI5yxQYgIk07PYQEUFTiLUawrZdczwUhzeEtWqAomyBIojJ8Rbj+2SkADXSFp+hAS53SEQrc84OCYGhDedqR6uSNGVrwyGz+EYCOzOAVamuFH3c6nY5E4Ay+ZJkyyJBKmjbFbh/FU88moS6OLvUgyXuIEXS1Mk64kqpnJcj1HgIES2yMGpXgXkf6FVeAekQGbyBjqHLRhql2hF19pchDPdIAIwTiFi+yBSCIgMbDJjYjTU2JCrCgiFbAzTLOaEUisMBElPD1shkpEkoasAIldIEMb9A1g1D04AYydCEJKqjsRwYwStR2KTrAHY5vmzLX4D5muKFRLXA7ity4nuQA7qJadA+QAAA0NyAAOw==',
  'unknown': 'data:image/gif;base64,R0lGODlhZABkAMIFACQgH1ZRUIiDgrizsv3//P///////////yH5BAEKAAcALAAAAABkAGQAAAP+eLrc/vCBSWuNOOvNtf3g141k6YRoaplse6ow7M5jDASBoA/8oAs4G20oSeUGhKRyyVT6Aioi0YhsWq/LARQldYVy2LA4CQx1S9/qeI3Vms8bUEDNrl/dIngkRLf7rXgreg0gAn+HYgIggwsfAYiQYYEUjB+GkZhXioJnH32ZoEkDeVKeoadMo5w0pqiuSqReFY+vtUlblLIVtrwEsSStvbW/HRafwqequcAVx8jJq3EVl8+8m8vSE7TVvbgAxbvcyNEQFtTi1uQv2ujP3hnG7cjKExiz8u4X5c348+oH9/ohe1dkgjOBqOgVvIEwHzYF0xoiu/aNgQWJz1YFxNj+TR9ECgc5hlLYiILIccs2nrRFMOLKdLn4vbRFMtzMWjVN3rR1QeVOVN58/gwVlMK5oaEoukR6SqlRpqicGoQKDURIqnboycSKSStIrpm8TjgK9o9UAGTL2jmbVi2bs9vc+inKTu6fdzbt1tGXV++YnFP9rgGMVvAaih/rGg5DEKDOxVg8Og4MuQnJxAwrN2k8eYLmJtGWfkZMiEJczZxLUq58ubTiyqlVrzasdY9p1JLXzdZb297txbF1FxasNNvusr2Nn1Yb3PZTucVrbAWbXPpX6v88xMPqtcUHrsSY/WYadEiwneFZnF/Zvct6ju07mVvptJKF5f0m1WPU+blZQKn8yTadOPrtF6CA2lzlSoEVHejafQqGRVeDDgpnWluZlLFIhb6lMdKEBnLY4RcC8JDVE1GICA4MOPzQgw86BBGDiurZYGN6NFp344w5urcjjj36KAONCQAAOw=='
};

interface GVData {
  id: string;
  label: string;
  color: string;
  shape: string;
  icon: string;
  areaSize: number;
  axis: string | number;
}

export const icons: string[] = [
  'brat', 'cool', 'happy', 'surprise', 'laughing', 'grimace', 'peace', 'sleep'
];
export const opponents = [
  { label: 'Penguin', color: '#4527a0', shape: 'circle', icon: images['penguin'] },
  { label: 'Squirrel', color: '#f7d97b', shape: 'triangle', icon: images['squirrel'] },
  { label: 'Cheetah', color: '#f44336', shape: 'square', icon: images['cheetah'] },
  { id: 'Visitor', label: 'Visitor', color: '#000000', shape: 'diamond', icon: images['unknown'] }
];
export const shoes = [
  { label: 'Barefoot', color: '#000000', shape: 'square' },
  { label: 'Boots', color: '#1e88e5', shape: 'triangle' },
  { label: 'Wheels', color: '#81c784', shape: 'circle' },
  { label: 'Athletic', color: '#fff9c4', shape: 'diamond' },
  { label: 'Casual', color: '#f7d97b', shape: 'wye' },
];

const unknownGVData: Partial<GVData> = {label: 'Unknown', color: '#000000', shape: 'square'};
function createLookup(data: Partial<GVData>[], unknown = unknownGVData): Operator<any, Partial<GVData>> {
  return lookup(transform(data, (result, d) => {
    if (d.label) {
      result[d.label] = d;
      result[d.label.toLowerCase()] = d;
    }
    if (d.id) { result[d.id] = d; }
  }, {}), unknown);
}

// @dynamic
export class Person {
  id: string;
  icon: string;
  age: number;
  height: number;
  opponent: string;
  shoes: string;
  zipCode: string;

  state: string; // Derived from zipCode
  latitude: number;
  longitude: number;

  constructor(data: any = {}) {
    Object.assign(this, data);
  }

  @Operand(map<Person, string>(s => `${s.icon}`))
  label: string;

  @Operand(chain(access('icon'), lookup(images, images['unknown'])))
  iconShape: string;

  @Operand(chain(access('age'), areaSizeScale.quantitative([0, 100])))
  ageAreaSize: number;

  @Operand(chain(access('height'), areaSizeScale.quantitative([0, 89])))
  heightAreaSize: number;

  @Operand(chain(access('opponent'), createLookup(opponents)))
  Opponent: Partial<GVData>;

  @Operand(chain(access('shoes'), createLookup(shoes)))
  Shoe: Partial<GVData>;

  toJSON(): any {
    return assignIn({}, this);
  }
}
