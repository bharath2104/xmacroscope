<div class="datatable" [ngClass]="{'no-header': !showAppHeader}">
  <mat-table [dataSource]="dataSource" class="table">
    <ng-container *ngFor="let field of fields; index as i" [matColumnDef]="field.label" class="container">
      <mat-header-cell class="draggable-header" [class.mav-header-persona]="field.id === 'persona'" [mavDraggable]="field" *matHeaderCellDef>{{field.label}}</mat-header-cell>
      <mat-cell *matCellDef="let item" [mavDraggable]="field" [ngSwitch]="field.id">

        <div *ngSwitchCase="'persona'" class="draggable mav-field-{{ field.id }}">
          <aisl-persona
            [shape]="item[i].shape" 
            [color]="item[i].color" 
            [shapeSize]="item[i].size" 
            [pathStrokeColor]="item[i].strokeColor">
          </aisl-persona>
        </div>

        <div *ngSwitchCase="'index'" [innerHTML]="item[i]" class="mav-field-{{ field.id }}"></div>

        <div *ngSwitchDefault [innerHTML]="item[i]" class="draggable mav-field-{{ field.id }}">
        </div>

      </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="columns"></mat-header-row>
    <mat-row *matRowDef="let row; index as i; columns: columns;" 
      (click)="onClick(i)" 
      [class.selected]="i===selectedIndex">
    </mat-row>
  </mat-table>
</div>