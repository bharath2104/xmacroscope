<div class="container" [ngClass]="{'no-header': !showAppHeader}">
  <div class="first-column">
    <button
      mat-raised-button
      class="restart-button"
      (click)="[dtable.resetSelection(), restartStream()]">
    RESTART
    </button>
      <div class="table">
        <aisl-datatable #dtable
          [fields]="encodingFields"
          [idField]="datatableIdField"
          (rowClick)="splot.focusItem($event[1])">
        </aisl-datatable>
        <!-- <mav-attribute-selector [fields]="encodingFields"></mav-attribute-selector> -->
      </div>
  </div>
 
  <div class="second-column">
    <div class="visualization-box">
      <mat-tab-group [selectedIndex]="1" class="visualization-tabs" #tabs>
        <mat-tab [disabled]="true" isActive="false">
          <ng-template mat-tab-label>
            <div class="partial-disabled-tab-label">Select</div>
            Visualization Type
          </ng-template>
        </mat-tab>

        <mat-tab>
          <ng-template mat-tab-label class="tab-label">
            <div>
              <img src="assets/icon-mav-scatter-graph.svg" height="100%">
            </div>
            <div class="text">Scatter Graph</div>
          </ng-template>
          <aisl-scatterplot #splot
            [xField]="scatterPlotX"
            [yField]="scatterPlotY"
            [pointShapeField]="shapeField"
            [pointColorField]="colorField"
            [pointStrokeColorField]="strokeColorField"
            [pointSizeField]="sizeField">
          </aisl-scatterplot>

          <mav-field-dropzone mappingKey="axis" [(field)]="scatterPlotX" #xEncoding>
            <div class="encodingDropZone {{ xEncoding.selectionClass }} x-dropzone">
              <span class="subtitle">
                {{ xEncoding.field?.label }}
              </span>
            </div>
          </mav-field-dropzone>

          <mav-field-dropzone mappingKey="axis" [(field)]="scatterPlotY" #yEncoding>
            <div class="encodingDropZone {{ yEncoding.selectionClass }} y-dropzone">
                <span class="subtitle">
                  {{ yEncoding.field?.label }}
                </span>
            </div>
          </mav-field-dropzone>
        </mat-tab>

        <mat-tab>
          <ng-template mat-tab-label class="tab-label">
            <div class="image">
              <img src="assets/icon-mav-geomap.svg" height="100%">
            </div>
            <div class="text">&emsp;&emsp;&ensp;Map&emsp;&emsp;</div>
          </ng-template>

          <aisl-geomap
            [pointShapeField]="shapeField"
            [pointColorField]="colorField"
            [pointStrokeColorField]="strokeColorField"
            [pointSizeField]="sizeField">
          </aisl-geomap>
        </mat-tab>
      </mat-tab-group>
    </div>
    <div class="legend-description-box">

      <div class="description">
        <span class="title">Select Graphic Variables</span>

        <div class="text">
          Quantitative: Data may take on any value within a finite or infinite interval and are commonly acquired via measurement.
        </div>

        <div class="text">
          Qualitative: Data take on only specific values with no values in between and are frequently determined by counting.
        </div>
      </div>

      <div class="quantitative">
        <mav-field-dropzone mappingKey="size" [(field)]="sizeField" #sizeEncoding>
          <div class="encodingDropZone {{ sizeEncoding.selectionClass }}">
            <span class="title">Quantitative</span>
            <br>
            <span class="subtitle">
              Size: {{ sizeEncoding.field?.label }}
              <aisl-size-legend [sizeField]="sizeEncoding.field"></aisl-size-legend>
            </span>
          </div>
        </mav-field-dropzone>
      </div>

      <div class="qualitative">
        <mav-field-dropzone mappingKey="color" [(field)]="colorField" #colorEncoding>
          <div class="encodingDropZone {{ colorEncoding.selectionClass }}">
            <span class="title">Qualitative</span>
            <br>
            <span class="subtitle">
              Color: {{ colorEncoding.field?.label }}
              <aisl-color-legend [colorField]="colorEncoding.field"></aisl-color-legend>
            </span>
          </div>
        </mav-field-dropzone>
      </div>
    </div>
  </div>
</div>